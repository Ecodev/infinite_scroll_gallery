<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:gallery="http://typo3.org/ns/Fab/InfiniteScrollGallery/ViewHelpers"
      xmlns:m="http://typo3.org/ns/Fab/Media/ViewHelpers">

<f:layout name="Default"/>
<f:section name="main">

	<gallery:loadAssets/>
	<script type="text/javascript">

		// Declare namespace.
		window.infinitesSrollGallery = window.infinitesSrollGallery || {};

		// Run time variables
		var infinitesSrollGallery = {
			numberOfScroll: 0
		};

		// Enable/disable scroll
		//infinitesSrollGallery.enableMoreLoading = '{settings.enableMoreLoading}';
		// Array containing images not displayed by defaut on this page

		//infinitesSrollGallery.imageStack = {-gallery:imageStack(images: '{imageStack}', settings: '{settings}')};

	</script>

	<f:comment>
		<gallery:dynamicStyle settings="{settings}"/>
	</f:comment>

	<f:if condition="{settings.showFilters}">

		<f:form id="tx-infinitescrollgallery-form" method="GET" class="form-inline">
			<f:form.hidden id="tx-infinitescrollgallery-url" value="{f:uri.page()}"/>
			<f:form.hidden name="limit" id="tx-infinitescrollgallery-limit" value="{settings.limit}"/>
			<f:form.hidden name="offset" id="tx-infinitescrollgallery-offset" value="0"/>
			<f:form.hidden name="contentElement" id="tx-infinitescrollgallery-recordUid" value="{data.uid}"/>
			<f:form.hidden name="language" id="tx-infinitescrollgallery-language"
			               value="{gallery:frontendConfiguration(key: 'language', default: 'en')}"/>

			<div class="form-group">
				<label id="tx-infinitescrollgallery-category">
					<f:translate key="filter_by"/>
				</label>
				<f:form.select name="category"
				               id="tx-infinitescrollgallery-category"
				               options="{categories}"
				               optionValueField="uid"
				               optionLabelField="title"/>
			</div>

			<input type="search"
			       id="tx-infinitescrollgallery-searchTerm"
			       placeholder="{f:translate(key:'search')}"
			       class="search placeholder"
			       name="tx_infinitescrollgallery_pi1[searchTerm]"/>
		</f:form>

	</f:if>

	<div class="tx-infinitescrollgallery-main">
		<ul>
			<f:for each="{images}" as="image">
				<li class="tx-infinitscrollgallery-thumbnail">
					<m:file.thumbnail file="{image}" output="imageWrapped"/>
				</li>
			</f:for>
		</ul>

		<div class="tx-infinitescrollgallery-footer" style="clear: both">
			<div id="tx-infinitescrollgallery-recordnumber" <f:if condition="{numberOfVisibleImages} == {totalNumberOfImages}">class="tx-infinitescrollgallery-hidden"</f:if>>
			<span id="tx-infinitescrollgallery-numberOfVisibleImages">{numberOfVisibleImages}</span> /
			<span id="tx-infinitescrollgallery-totalImages">{totalNumberOfImages}</span>
		</div>
		<div class="tx-infinitescrollgallery-next" style="text-align: center">
			<!-- <a href="#">next &gt;</a> -->
		</div>
	</div>
	<div class="tx-infinitescrollgallery-loading">
		<img src="{gallery:publicPath(resource: 'Images/ajax-loader.gif')}" alt="loadding"/>
	</div>

</f:section>

</html>