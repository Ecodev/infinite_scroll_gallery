<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:gallery="http://typo3.org/ns/Fab/InfiniteScrollGallery/ViewHelpers">

<f:layout name="Default"/>
<f:section name="main">

	<gallery:loadAssets/>
	<script type="text/javascript">

		// Declare namespace.
		window.infinitesSrollGallery = window.infinitesSrollGallery || {};

		// Run time variables
		var infinitesSrollGallery = {
			numberOfScroll: 0
		};

		// Enable/disable scroll
		//infinitesSrollGallery.enableMoreLoading = '{settings.enableMoreLoading}';
		// Array containing images not displayed by defaut on this page

		infinitesSrollGallery.images = {gallery:imageStack()};

	</script>

	<f:comment>
		<gallery:dynamicStyle settings="{settings}"/>
	</f:comment>

	<f:if condition="{settings.showFilters}">

		<f:form id="tx-infinitescrollgallery-form" method="GET" class="form-inline">
			<f:form.hidden id="tx-infinitescrollgallery-url" value="{f:uri.page()}"/>
			<f:form.hidden name="limit" id="tx-infinitescrollgallery-limit" value="{settings.limit}"/>
			<f:form.hidden name="offset" id="tx-infinitescrollgallery-offset" value="0"/>
			<f:form.hidden name="contentElement" id="tx-infinitescrollgallery-recordUid" value="{data.uid}"/>
			<f:form.hidden name="language" id="tx-infinitescrollgallery-language"
			               value="{gallery:frontendConfiguration(key: 'language', default: 'en')}"/>

			<f:if condition="{categories}">
				<div class="form-group">
					<label id="tx-infinitescrollgallery-category">
						<f:translate key="filter_by"/>
					</label>
					<f:form.select name="category"
					               id="tx-infinitescrollgallery-category"
					               options="{categories}"
					               optionValueField="uid"
					               optionLabelField="title"/>
				</div>
			</f:if>

			<input type="search"
			       id="tx-infinitescrollgallery-searchTerm"
			       placeholder="{f:translate(key:'search')}"
			       class="search placeholder"
			       name="tx_infinitescrollgallery_pi1[searchTerm]"/>
		</f:form>

	</f:if>

	<div class="tx-infinitescrollgallery-main">
		<ul id="infiniteScrollGallery">
			<!--<f:for each="{images}" as="image">-->
				<!--<li class="tx-infinitscrollgallery-thumbnail">-->
					<!--<gallery:thumbnail image="{image}"/>-->
				<!--</li>-->
			<!--</f:for>-->
		</ul>

		<div class="tx-infinitescrollgallery-footer" style="clear: both">
			<div id="tx-infinitescrollgallery-recordnumber" <f:if condition="{numberOfVisibleImages} == {totalNumberOfImages}">class="tx-infinitescrollgallery-hidden"</f:if>>
			<span id="tx-infinitescrollgallery-numberOfVisibleImages">{numberOfVisibleImages}</span> /
			<span id="tx-infinitescrollgallery-totalImages">{totalNumberOfImages}</span>
		</div>
		<div class="tx-infinitescrollgallery-next" style="text-align: center">
			<!-- <a href="#">next &gt;</a> -->
		</div>
	</div>
	<div class="tx-infinitescrollgallery-loading">
		<img src="{gallery:publicPath(resource: 'Images/ajax-loader.gif')}" alt="loadding"/>
	</div>

	<!-- Root element of PhotoSwipe. Must have class pswp. -->
	<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
		<!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
		<div class="pswp__bg"></div>
		<!-- Slides wrapper with overflow:hidden. -->
		<div class="pswp__scroll-wrap">
			<!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
			<div class="pswp__container">
				<div class="pswp__item"></div>
				<div class="pswp__item"></div>
				<div class="pswp__item"></div>
			</div>
			<!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
			<div class="pswp__ui pswp__ui--hidden">
				<div class="pswp__top-bar">
					<!--  Controls are self-explanatory. Order can be changed. -->
					<div class="pswp__counter"></div>
					<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
					<button class="pswp__button pswp__button--share" title="Share"></button>
					<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
					<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
					<!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
					<!-- element will get class pswp__preloader--active when preloader is running -->
					<div class="pswp__preloader">
						<div class="pswp__preloader__icn">
							<div class="pswp__preloader__cut">
								<div class="pswp__preloader__donut"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
					<div class="pswp__share-tooltip"></div>
				</div>
				<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
				</button>
				<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
				</button>
				<div class="pswp__caption">
					<div class="pswp__caption__center"></div>
				</div>
			</div>
		</div>
	</div>

</f:section>

</html>
