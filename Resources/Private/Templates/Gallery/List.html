<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:gallery="http://typo3.org/ns/Fab/InfiniteScrollGallery/ViewHelpers">

<f:layout name="Default"/>
<f:section name="main">

	<div data-galleryid="{data.uid}" class="tx-infinitescrollgallery" id="tx-infinitescrollgallery-{data.uid}">

		<gallery:loadAssets/>
		<script type="text/javascript">
			window.infinitesScrollGallery = window.infinitesScrollGallery || [];

			var infiniteScrollGallery = {};
			infiniteScrollGallery.id = Number('{data.uid}');
			infiniteScrollGallery.images = {gallery:imageStack()};
			infiniteScrollGallery.thumbnailMaximumHeight = Number('{settings.thumbnailMaximumHeight}');
			infiniteScrollGallery.round = Number('{settings.round}');
			infiniteScrollGallery.thumbnailFormat = '{settings.thumbnailFormat}';
			infiniteScrollGallery.imagesPerRow = Number('{settings.imagesPerRow}');
			infiniteScrollGallery.margin = Number('{settings.margin}');
			infiniteScrollGallery.limit = Number('{settings.limit}');

			window.infinitesScrollGallery.push(infiniteScrollGallery);
		</script>

		<f:comment>
			<gallery:dynamicStyle settings="{settings}"/>
		</f:comment>

		<f:if condition="{settings.showFilters}">

			<f:form class="tx-infinitescrollgallery-form form-inline" id="tx-infinitescrollgallery-form-{data.uid}" method="GET">
				<f:form.hidden id="tx-infinitescrollgallery-url" value="{f:uri.page()}"/>
				<f:form.hidden name="limit" id="tx-infinitescrollgallery-limit-{data.uid}" value="{settings.limit}"/>
				<f:form.hidden name="offset" id="tx-infinitescrollgallery-offset-{data.uid}" value="0"/>
				<f:form.hidden name="contentElement" id="tx-infinitescrollgallery-recordUid-{data.uid}" value="{data.uid}"/>

				<input type="search"
					   id="tx-infinitescrollgallery-searchTerm-{data.uid}"
					   placeholder="{f:translate(key:'search')}"
					   class="tx-infinitescrollgallery-searchTerm search placeholder"
					   name="tx_infinitescrollgallery_pi1[searchTerm]"/>

				<f:if condition="{categories}">
					<div class="form-group">
						<label>
							<input type="checkbox" checked="checked" data-uid="none" class="tx-infinitescrollgallery-category" id="tx-infinitescrollgallery-category-all">
							<f:translate key="without"/>
						</label>
						<f:for each="{categories}" as="category">
							<label>
								<input type="checkbox" checked="checked" data-uid="{category.uid}" class="tx-infinitescrollgallery-category" id="tx-infinitescrollgallery-category-{category.uid}">
								{category.title}
							</label>
						</f:for>
					</div>
				</f:if>

			</f:form>

		</f:if>

		<div class="tx-infinitescrollgallery-main">
			<div class="tx-infinitescrollgallery-body"></div>

			<div class="tx-infinitescrollgallery-footer" style="clear: both">
				<div class="tx-infinitescrollgallery-recordnumber">
					<span class="tx-infinitescrollgallery-numberOfVisibleImages">{numberOfVisibleImages}</span> /
					<span class="tx-infinitescrollgallery-totalImages">{totalNumberOfImages}</span>
				</div>
			</div>
			<div class="tx-infinitescrollgallery-next" style="text-align: center">
				 <a href=""><f:translate key="more"/></a>
			</div>
		</div>

		<!-- Root element of PhotoSwipe. Must have class pswp. -->
		<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
			<!-- Background of PhotoSwipe.
				 It's a separate element as animating opacity is faster than rgba(). -->
			<div class="pswp__bg"></div>
			<!-- Slides wrapper with overflow:hidden. -->
			<div class="pswp__scroll-wrap">
				<!-- Container that holds slides.
					PhotoSwipe keeps only 3 of them in the DOM to save memory.
					Don't modify these 3 pswp__item elements, data is added later on. -->
				<div class="pswp__container">
					<div class="pswp__item"></div>
					<div class="pswp__item"></div>
					<div class="pswp__item"></div>
				</div>
				<!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
				<div class="pswp__ui pswp__ui--hidden">
					<div class="pswp__top-bar">
						<!--  Controls are self-explanatory. Order can be changed. -->
						<div class="pswp__counter"></div>
						<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
						<button class="pswp__button pswp__button--share" title="Share"></button>
						<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
						<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
						<!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
						<!-- element will get class pswp__preloader--active when preloader is running -->
						<div class="pswp__preloader">
							<div class="pswp__preloader__icn">
								<div class="pswp__preloader__cut">
									<div class="pswp__preloader__donut"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div>
					<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
					<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
					<div class="pswp__caption">
						<div class="pswp__caption__center"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

</f:section>

</html>
